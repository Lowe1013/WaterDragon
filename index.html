<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>용수를 누르세요!</title>
  
  <!-- Firebase compat SDK -->
  <script defer src="https://www.gstatic.com/firebasejs/11.6.0/firebase-app-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/11.6.0/firebase-database-compat.js"></script>
  
  <style>
    body {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      background: #f0f0f0;
      font-family: sans-serif;
    }
    #clickButton {
      width: 300px;
      cursor: pointer;
      transition: transform 0.1s;
    }
    #clickButton:active {
      transform: scale(1.1);
    }
    .counter {
      position: absolute;
      top: 40%;
      font-size: 48px;
      font-weight: bold;
      color: white;
      text-shadow: 2px 2px 5px black;
    }
    #specialNotice {
      margin-top: 10px;
      font-size: 18px;
      font-weight: bold;
      color: red;
    }
    footer {
      position: fixed;
      bottom: 10px;
      font-size: 14px;
      color: gray;
    }
  </style>
  
  <script defer>
    document.addEventListener("DOMContentLoaded", function () {
      // Firebase 설정
      const firebaseConfig = {
        apiKey: "AIzaSy...", // (생략)
        authDomain: "waterdragon-499c9.firebaseapp.com",
        databaseURL: "https://waterdragon-499c9-default-rtdb.firebaseio.com",
        projectId: "waterdragon-499c9",
        storageBucket: "waterdragon-499c9.firebasestorage.app",
        messagingSenderId: "756466741361",
        appId: "1:756466741361:web:818dc87ef66c27ee3eebd0"
      };

      firebase.initializeApp(firebaseConfig);
      const database = firebase.database();
      const totalCountRef = database.ref('totalCount');

      // 초기 설정
      let personalCount = 0;
      document.getElementById('personalCount').innerText = personalCount;
      
      // 클릭 이벤트
      const button = document.getElementById("clickButton");
      button.addEventListener("mousedown", function () {
        button.src = "button-active.png";
        button.style.transform = "scale(1.1)";
      });
      
      button.addEventListener("mouseup", function () {
        button.src = "button.png";
        button.style.transform = "scale(1)";
      });

      button.addEventListener("click", function () {
        personalCount++;
        document.getElementById('personalCount').innerText = personalCount;
        
        totalCountRef.transaction(currentCount => {
          return (currentCount || 0) + 1;
        });
      });
      
      // 총 카운트 실시간 반영
      totalCountRef.on("value", (snapshot) => {
        const totalCount = snapshot.val() || 0;
        document.getElementById('totalCount').innerText = totalCount;
        
        if (totalCount >= 100000) {
          document.getElementById('specialNotice').innerText = "🎉 10만 카운트 달성! 특별 영상 공개 예정!";
        }
      });
    });
  </script>
</head>
<body>
  <h1>용수를 누르세요!</h1>
  <div class="counter" id="personalCount">0</div>
  <img id="clickButton" src="button.png" alt="클릭 버튼">
  <div id="totalCount">총 카운트: 0</div>
  <div id="specialNotice"></div>
  <footer>
    <p>제작: <strong>Garden.two</strong></p>
  </footer>
</body>
</html>
